<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Boletín NO Oficial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        /* [Todos los estilos anteriores se mantienen igual] */
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9fafb;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            position: relative;
        }

        h1 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: -15px;
            color: #1a202c;
        }

        .disclaimer {
            font-size: 0.9rem;
            text-align: center;
            margin-bottom: 20px;
            color: #9a3412;
            background-color: #fff7ed;
            border: 1px solid #fed7aa;
            padding: 10px;
            border-radius: 8px;
        }        

        .aviso {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
        }

        .titulo a {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e40af;
            text-decoration: none;
        }

        .titulo a:hover {
            text-decoration: underline;
        }

        .fecha {
            font-size: 0.9rem;
            color: #666;
            margin-top: 8px;
        }

        .TextoResumido {
            margin-top: 15px;
            white-space: pre-wrap;
            line-height: 1.5;
            text-align: justify;
        }

        button {
            background: none;
            border: none;
            color: #1e40af;
            cursor: pointer;
            font-size: 0.9rem;
            padding: 0;
            margin-top: 10px;
        }

        button:hover {
            text-decoration: underline;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
            font-size: 1rem;
        }

        .pagination a {
            text-decoration: none;
            color: #1e40af;
            font-weight: 500;
        }

        .pagination a:hover {
            text-decoration: underline;
        }

        .donate-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .donate-btn {
            background-color: #009ee3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .donate-btn:hover {
            background-color: #007eb5;
        }

        .donate-btn img {
            height: 20px;
        }

        /* Estilos para el modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .modal-message {
            margin-bottom: 25px;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .modal-btn {
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }

        .modal-btn-primary {
            background-color: #009ee3;
            color: white;
        }

        .modal-btn-primary:hover {
            background-color: #007eb5;
        }

        .modal-btn-secondary {
            background-color: #f0f0f0;
            color: #333;
        }

        .modal-btn-secondary:hover {
            background-color: #e0e0e0;
        }

        @media (max-width: 600px) {
            .titulo a {
                font-size: 1rem;
            }

            .container {
                padding: 15px;
            }
            
            .modal-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .modal-btn {
                width: 100%;
            }
        }
        
        /* Estilos corregidos para alineación perfecta */

        .filtro-perfecto * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        .filtro-perfecto {
            margin: 1rem auto;
            max-width: 500px;
            font-family: system-ui, sans-serif;
        }
        
        .filtro-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        .filtro-label {
            font-size: 0.95rem;
            color: #4b5563;
            font-weight: 500;
        }
        
        .filtro-controls {
            display: flex;
            align-items: stretch; /* Asegura misma altura */
            height: 2.25rem; /* Altura fija */
        }
        
        .filtro-date {
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem 0 0 0.375rem;
            font-size: 0.9rem;
            height: 100%;
        }
        
        .filtro-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            background: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .filtro-submit {
            color: #3b82f6;
        }
        
        .filtro-submit:hover {
            background-color: #eff6ff;
        }
        
        .filtro-clear {
            color: #ef4444;
        }
        
        .filtro-clear:hover {
            background-color: #fef2f2;
        }
        
        .filtro-svg {
            width: 1.1rem;
            height: 1.1rem;
        }
        
        @media (max-width: 640px) {
            .filtro-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filtro-controls {
                width: 100%;
            }
            
            .filtro-date {
                flex-grow: 1;
            }
            
            .filtro-submit {
                border-radius: 0.375rem 0 0 0.375rem;
            }
        }
        
        .filtro-title {
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem 0 0 0.375rem;
            font-size: 0.9rem;
            height: 100%;
        }
        
        .actualizacion {
            text-align: center;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #666;
            font-style: italic;
        }    

        .autor {
            text-align: center;
            font-size: 0.95rem;
            color: #4b5563;
            margin-top: -20px;
            margin-bottom: 20px;
            font-style: italic;
        }

        .autor a {
            color: #1e40af;
            text-decoration: none;
            font-weight: 500;
        }

        .autor a:hover {
            text-decoration: underline;
        }
.main-title a {
    text-decoration: none; /* Quita el subrayado */
    color: inherit; /* Hereda el color del h1 */
}

.main-title a:hover {
    text-decoration: underline; /* Puedes añadirlo solo al hover si quieres */
}       

.sub-title  {
    text-align: center;
    margin-bottom: 30px;
}


.filtros-container {
    display: flex; /* Habilita Flexbox */
    flex-wrap: wrap; /* Permite que los elementos se envuelvan si no hay espacio */
    justify-content: center; /* Centra los filtros horizontalmente */
    gap: 15px; /* Espacio entre los filtros */
    margin-bottom: 20px; /* Espacio debajo de los filtros */
}

/* Opcional: Ajustar el ancho de cada filtro si el contenedor es ancho */
.filtros-container .filtro-perfecto {
    flex: 1 1 350px; /* Permite que crezca y se encoja, con un ancho base de 350px */
    max-width: 48%; /* Para que dos quepan en una línea antes de envolverse */
    /* Ajusta este max-width según tus necesidades y el diseño general */
}

@media (max-width: 768px) { /* Ajusta el breakpoint según tu diseño */
    .filtros-container .filtro-perfecto {
        max-width: 100%; /* En pantallas más pequeñas, que ocupen todo el ancho */
    }
}
    </style>
    <link rel="icon" type="image/x-icon" href="https://www.boletinoficial.gob.ar/favicon.ico" />
</head>
<body>
    <div class="container">
        <h1 class="main-title"><a href="/">Boletín NO Oficial</a></h1>
        <div class="sub-title">
            <h3>(La info del oficial, pero en criollo)</h3>
          </div>

        <div class="autor">
            by <a href="https://www.linkedin.com/in/nrmattar" target="_blank" rel="noopener noreferrer">Nahuel</a>
        </div>

        <div class="disclaimer">
            Los avisos fueron extraídos del Boletín Oficial y resumidos con Modelos de IA. Puede haber errores.
        </div>
        
        <div class="actualizacion">
            Se muestra información a partir de: <b>{{ fecha_desde }}</b>. Fecha Última Actualización: <b>{{ fecha_actualizacion }}</b>
        </div>        

        <hr>
        <div class="filtros-container">  
        <div class="filtro-perfecto">
            <form action="/" method="GET" class="filtro-form">
                <div class="filtro-group">
                    <span class="filtro-label">Fecha:</span>
                    <div class="filtro-controls">
                        <input type="date" 
                               id="fecha" 
                               name="fecha" 
                               class="filtro-date"
                               value="{{ request.args.get('fecha', '') }}">
                        <input type="hidden" name="titulo" value="{{ request.args.get('titulo', '') }}">
                        <button type="submit" class="filtro-btn filtro-submit" title="Aplicar filtro">
                            <svg viewBox="0 0 20 20" fill="currentColor" class="filtro-svg">
                                <path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z" clip-rule="evenodd"/>
                            </svg>
                        </button>
                        {% if request.args.get('fecha') %}
                        <a href="{{ url_for('index', titulo=request.args.get('titulo', '')) }}" class="filtro-btn filtro-clear" title="Limpiar filtro">
                            <svg viewBox="0 0 20 20" fill="currentColor" class="filtro-svg">
                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                            </svg>
                        </a>
                        {% endif %}
                    </div>
                </div>
            </form>
        </div>


        <div class="filtro-perfecto">
            <form action="/" method="GET" class="filtro-form">
                <div class="filtro-group">
                    <span class="filtro-label">Título:</span>
                    <div class="filtro-controls">
                        <input type="text" 
                               id="titulo" 
                               name="titulo" 
                               placeholder="Ej: HUMANO, decreto"
                               class="filtro-title"
                               value="{{ request.args.get('titulo', '') }}">
                        <input type="hidden" name="fecha" value="{{ request.args.get('fecha', '') }}">
                        <button type="submit" class="filtro-btn filtro-submit" title="Aplicar filtro">
                            <svg viewBox="0 0 20 20" fill="currentColor" class="filtro-svg">
                                <path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z" clip-rule="evenodd"/>
                            </svg>
                        </button>
                        {% if request.args.get('titulo') %}
                        <a href="{{ url_for('index', fecha=request.args.get('fecha', '')) }}" class="filtro-btn filtro-clear" title="Limpiar filtro">
                            <svg viewBox="0 0 20 20" fill="currentColor" class="filtro-svg">
                                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                            </svg>
                        </a>
                        {% endif %}
                    </div>
                </div>
            </form>
        </div>
          </div>
        {% for aviso in avisos %}
            <div class="aviso">
                <div class="titulo">
                    <a href="{{ aviso['Enlace'] }}" target="_blank">{{ aviso['Titulo'] }}</a>
                </div>
                <div class="fecha">
                    Publicado el {{ aviso['FechaPublicacion'] }} (Modelo utilizado: {{ aviso['Modelo'] }})
                </div>
                <div class="TextoResumido" id="TextoResumido-{{ loop.index }}">
                    {{ aviso['TextoResumidoCorto'] }}{% if aviso['TextoResumidoLargo'] %}<span id="more-{{ loop.index }}" style="display:none;">{{ aviso['TextoResumidoLargo'] }}</span><span id="dots-{{ loop.index }}">...</span>{% endif %}
                </div>
                {% if aviso['TextoResumidoLargo'] %}
                    <button onclick="toggleTextoResumido({{ loop.index }})" id="btn-{{ loop.index }}">Mostrar más</button>
                {% endif %}
            </div>
        {% endfor %}

        <div class="pagination">
            {% set current_fecha = request.args.get('fecha', '') %}
            {% set current_titulo = request.args.get('titulo', '') %}

            {% if pagina > 1 %}
                <a href="{{ url_for('index', pagina=pagina - 1, fecha=current_fecha, titulo=current_titulo) }}">&laquo; Anterior</a>
            {% endif %}
            <span>Página {{ pagina }} de {{ total_paginas }}</span>
            {% if pagina < total_paginas %}
                <a href="{{ url_for('index', pagina=pagina + 1, fecha=current_fecha, titulo=current_titulo) }}">Siguiente &raquo;</a>
            {% endif %}
        </div>

        <div class="donate-container">
            <button class="donate-btn" onclick="showDonateModal()">
                <img src="https://http2.mlstatic.com/frontend-assets/ui-navigation/5.18.9/mercadopago/logo__small@2x.png" alt="MercadoPago">
                Donar
            </button>
        </div>
    </div>

    <div id="donateModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-message">
                Transferí el monto que consideres a nrmattar.mp
            </div>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-primary" onclick="donateNow()">
                    Sí, de una
                </button>
                <button class="modal-btn modal-btn-secondary" onclick="hideDonateModal()">
                    Más tarde
                </button>
            </div>
        </div>
    </div>

    <script>
        function toggleTextoResumido(i) {
            const moreText = document.getElementById("more-" + i);
            const dots = document.getElementById("dots-" + i);
            const btnText = document.getElementById("btn-" + i);

            if (moreText.style.display === "none") {
                moreText.style.display = "inline";
                dots.style.display = "none";
                btnText.textContent = "Mostrar menos";
            } else {
                moreText.style.display = "none";
                dots.style.display = "inline";
                btnText.textContent = "Mostrar más";
            }
        }

        function showDonateModal() {
            const modal = document.getElementById("donateModal");
            modal.style.display = "flex";
        }

        function hideDonateModal() {
            const modal = document.getElementById("donateModal");
            modal.style.display = "none";
        }

        function donateNow() {
            // Abre MercadoPago en nueva pestaña
            window.open('https://www.mercadopago.com.ar/home', '_blank');
            // Cierra el modal
            hideDonateModal();
        }
    </script>
</body>
</html>